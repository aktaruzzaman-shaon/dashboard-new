<!-- Sidebar -->
<aside
  [class.w-20]="!isSidebarExpanded()"
  [class.w-64]="isSidebarExpanded()"
  class="fixed left-0 top-0 h-full bg-white border-r border-gray-200 z-50 transition-all duration-300 ease-in-out lg:static lg:z-auto overflow-y-auto"
>
  <!-- Logo -->
  <div class="p-4 border-b border-gray-200 flex justify-center">
    <div class="flex items-center space-x-2 justify-center">
      @if (!isSidebarExpanded()) {
        <div class="w-10 h-10 pl-6 flex items-center justify-center ">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="26"
            height="25"
            viewBox="0 0 26 25"
            fill="none"
          >
            <path
              d="M0 0.247851V0H6.99478C8.77769 0 10.0596 0.0326945 10.8427 0.111002C11.6989 0.208456 12.5278 0.471857 13.2832 0.886476C14.0723 1.29021 14.7268 1.91466 15.1673 2.68376C15.6144 3.53727 15.8331 4.49192 15.8021 5.45494C15.7961 6.73344 15.4027 7.9801 14.6738 9.0305C13.8502 10.2248 12.7561 11.2077 11.4806 11.899L13.2186 14.5759C13.6013 15.246 14.6092 16.7123 16.2423 18.9748C17.877 21.2397 19.1353 22.6135 20.0302 23.1107C20.8176 23.5784 21.7125 23.8348 22.6281 23.855C23.6436 23.7934 24.6247 23.4648 25.4724 22.9024L25.5766 23.2331C24.0848 24.3783 22.2367 24.9602 20.3579 24.8761C19.0198 24.9068 17.7149 24.4575 16.6795 23.6094C15.648 22.7655 13.8629 20.4482 11.3239 16.6575C11.3035 16.64 11.2907 16.6152 11.2882 16.5883L8.80963 12.7824L6.61767 12.8425H4.6196V22.2698C4.5848 22.8296 4.68547 23.3895 4.91308 23.9021C5.11456 24.2291 5.59735 24.3925 6.36525 24.3925V24.6388H0V24.3925C0.793756 24.3598 1.28871 24.1926 1.48107 23.8923C1.72791 23.3125 1.82844 22.6809 1.77379 22.0532V2.47012C1.79008 1.92975 1.70418 1.39117 1.52061 0.882676C1.3541 0.474411 0.845457 0.255454 0 0.247851ZM4.6196 0.643189V12.2069H7.20463C9.24072 12.2069 10.7431 11.7317 11.7376 10.7624C12.2303 10.2695 12.6153 9.67956 12.8681 9.03002C13.1208 8.38047 13.2358 7.68549 13.2057 6.98917C13.1948 5.43522 12.6888 3.92521 11.7611 2.67843C10.7981 1.32363 9.09601 0.645217 6.65493 0.643189H4.6196Z"
              fill="#231F20"
            />
          </svg>
        </div>
      }
      <!-- <div class="w-10 h-10 flex items-center justify-center text-lg font-bold text-blue-600">
        R
      </div> -->
      <div class="w-10 h-10 flex items-center justify-center text-lg font-bold">
        @if (isSidebarExpanded()) {
          <span class="font-bold text-gray-800">Rayna</span>
        }
      </div>
    </div>
  </div>

  <!-- Menu Items -->
  <nav class="p-4 space-y-1">
    @for (item of menuItems; track item.label) {
      <div class="mb-1">
        <!-- Parent Menu Item -->
        <div
          (click)="toggleMenuItem(item)"
          [routerLink]="!item.children ? item.route : null"
          routerLinkActive="bg-blue-50 text-blue-600"
          [routerLinkActiveOptions]="{ exact: false }"
          class="flex items-center justify-center lg:justify-between px-4 py-3 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors group"
          [attr.title]="item.label"
        >
          <div class="flex items-center space-x-3">
            <!-- Dynamic Icon: Component or String -->
            @if (isComponent(item.icon)) {
              <ng-container *ngComponentOutlet="$any(item.icon); inputs: { size: 20 }" />
            } @else {
              <span class="text-xl">{{ item.icon }}</span>
            }

            @if (isSidebarExpanded()) {
              <span class="text-sm font-medium text-gray-700 group-hover:text-gray-900">
                {{ item.label }}
              </span>
            }
          </div>

          <!-- Dropdown Arrow -->
          @if (item.children && isSidebarExpanded()) {
            <svg
              [class.rotate-180]="item.expanded"
              class="w-4 h-4 text-gray-400 transition-transform"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          }
        </div>

        <!-- Child Menu Items -->
        @if (item.children && item.expanded && isSidebarExpanded()) {
          <div class="ml-4 mt-1 space-y-1 pl-4">
            @for (child of item.children; track child.label) {
              <a
                [routerLink]="child.route"
                routerLinkActive="bg-blue-50 text-blue-600 font-medium"
                class="block px-4 py-2 rounded-lg text-sm text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors"
              >
                {{ child.label }}
              </a>
            }
          </div>
        }
      </div>
    }
  </nav>
</aside>
