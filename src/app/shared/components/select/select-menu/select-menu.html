<div class="flex flex-col gap-1.5 font-sans">
  @if (label()) {
    <label [for]="uniqueId" class="block text-sm font-medium text-slate-700 ml-0.5">
      {{ label() }}
    </label>
  }

  <div class="relative w-72">
    <button
      [id]="uniqueId"
      (click)="toggleDropdown()"
      type="button"
      class="flex w-full items-center justify-between rounded-lg border border-slate-300 bg-white px-4 py-2.5 text-left text-sm text-slate-900 shadow-sm ring-offset-2 transition-all hover:border-blue-400 focus:outline-none focus:ring-2 focus:ring-blue-500/20"
    >
      <span [class.text-slate-400]="!selectedOption()">
        {{ selectedOption()?.label || placeholder() }}
      </span>

      <svg
        class="h-4 w-4 text-slate-500 transition-transform duration-200"
        [class.rotate-180]="isOpen()"
        viewBox="0 0 20 20"
        fill="currentColor"
      >
        <path
          fill-rule="evenodd"
          d="M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z"
          clip-rule="evenodd"
        />
      </svg>
    </button>

    @if (isOpen()) {
      <div
        class="absolute z-50 mt-2 w-full overflow-hidden rounded-xl border border-slate-200 bg-white p-1.5 shadow-xl animate-in fade-in slide-in-from-top-1 duration-150"
      >
        <div class="flex flex-col">
          @for (option of options(); track option.id()) {
            <button
              (click)="selectOption(option)"
              type="button"
              class="flex w-full items-center rounded-md px-3 py-2 text-sm text-slate-600 hover:bg-blue-50 hover:text-blue-700 active:scale-[0.98] transition-all"
            >
              {{ option.label() }}
            </button>
          }
        </div>
      </div>
    }
  </div>
</div>
